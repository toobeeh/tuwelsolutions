var tws;(()=>{"use strict";var t={203:function(t,e){var n=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}c((o=o.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,o,r,i,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,o=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!((r=(r=u.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){u.label=i[1];break}if(6===i[0]&&u.label<r[1]){u.label=r[1],r=i;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(i);break}r[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.setSolution=e.getSolutions=void 0,e.getSolutions=function(t){return n(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,fetch("https://tuwelsolution.xerus.at/solution/"+t)];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))},e.setSolution=function(t){return n(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,fetch("https://tuwelsolution.xerus.at/solution/save/",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})];case 1:return e.sent(),[2]}}))}))}},498:function(t,e){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.TuwelMultianswerSolved=e.TuwelMultianswer=void 0;var r=function(){function t(t){var e,n=this;this.question=t;var o=t.querySelector(".formulation").cloneNode(!0);o.querySelectorAll(".subquestion").forEach((function(t){return t.remove()})),this.text=o.textContent,this.image=null===(e=t.querySelector("img"))||void 0===e?void 0:e.src.slice(0,1e4),this.answers=[],t.querySelectorAll(".subquestion select").forEach((function(t){var e=[];t.querySelectorAll("option").forEach((function(n){e.push({option:n,select:t})})),n.answers.push(e)}))}return t.prototype.matches=function(t){return"multianswer"==t.type&&t.text==this.text&&t.imgHash==this.image},t.prototype.solve=function(t){this.answers.forEach((function(e,n){e.forEach((function(e){e.option.selected=e.option.innerText==t.answers[n],e.option.selected&&(e.select.value=e.option.value)}))}))},t}();e.TuwelMultianswer=r;var i=function(t){function e(e){var n=t.call(this,e)||this,o=[];return e.querySelectorAll(".feedbackspan").forEach((function(t){o.push(t.innerHTML.split("<br>")[1].split(": ")[1])})),n.correctAnswers=o,n}return o(e,t),e.prototype.toJSON=function(){return{type:"multianswer",text:this.text,imgHash:this.image,answers:this.correctAnswers}},e}(r);e.TuwelMultianswerSolved=i},746:function(t,e){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.TuwelMultichoiceSolved=e.TuwelMultichoice=void 0;var r=function(){function t(t){var e,n=this;this.question=t,this.text=t.querySelector(".qtext").innerText,this.image=null===(e=t.querySelector("img"))||void 0===e?void 0:e.src.slice(0,1e4),this.answers=[],t.querySelectorAll(".answer > div").forEach((function(t){n.answers.push({text:t.innerText,element:t.querySelector("input:nth-child(2)")})}))}return t.prototype.matches=function(t){return"multichoice"==t.type&&t.text==this.text&&t.imgHash==this.image},t.prototype.solve=function(t){this.answers.forEach((function(e){t.answers.some((function(t){return e.text==t}))&&e.element.click()}))},t}();e.TuwelMultichoice=r;var i=function(t){function e(e){var n=t.call(this,e)||this,o=e.querySelector(".rightanswer").innerText;return n.correctAnswers=o.substring(o.indexOf(":")+1).trim().split(",").map((function(t){return t.trim()})),n}return o(e,t),e.prototype.toJSON=function(){return{type:"multichoice",text:this.text,imgHash:this.image,answers:this.correctAnswers}},e}(r);e.TuwelMultichoiceSolved=i},698:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}c((o=o.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,o,r,i,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,o=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!((r=(r=u.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){u.label=i[1];break}if(6===i[0]&&u.label<r[1]){u.label=r[1],r=i;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(i);break}r[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.setup=void 0;var i=n(203),u=n(498),s=n(746);function c(){return o(this,void 0,void 0,(function(){var t,e;return r(this,(function(n){switch(n.label){case 0:t=window.location.search.replace("?","").split("&").find((function(t){return t.indexOf("cmid")>=0})).replace("cmid=",""),e=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,i.getSolutions)(t)];case 2:return e=n.sent(),[3,4];case 3:return n.sent(),console.timeLog("No solutions for this quiz :/"),[2];case 4:return console.log("found solutions for this quiz: ",e),document.querySelectorAll(".que").forEach((function(t){if(t.classList.contains("multichoice")){var n=new s.TuwelMultichoice(t);null==e||e.questions.forEach((function(t){n.matches(t)&&(n.solve(t),console.log("solved a question:",n))}))}if(t.classList.contains("multianswer")){var o=new u.TuwelMultianswer(t);null==e||e.questions.forEach((function(t){o.matches(t)&&(o.solve(t),console.log("solved a question:",o))}))}})),console.log("solved all known questions"),[2]}}))}))}function l(){return o(this,void 0,void 0,(function(){var t,e,n;return r(this,(function(o){switch(o.label){case 0:return t=window.location.search.replace("?","").split("&").find((function(t){return t.indexOf("cmid")>=0})).replace("cmid=",""),e=[],document.querySelectorAll(".que").forEach((function(t){t.classList.contains("multichoice")?e.push(new s.TuwelMultichoiceSolved(t).toJSON()):t.classList.contains("multianswer")&&e.push(new u.TuwelMultianswerSolved(t).toJSON())})),n={quiz:t,questions:e},[4,(0,i.setSolution)(n)];case 1:return o.sent(),[2]}}))}))}e.setup=function(){var t=document.querySelector(".othernav"),e=document.createElement("a");e.href="#";var n=window.location.pathname.split("/").reverse()[0];"attempt.php"==n?(e.innerText="Load from tuwelsolutions",e.addEventListener("click",c),t.appendChild(e)):"review.php"==n&&(e.innerText="Upload to tuwelsolutions",e.addEventListener("click",l),t.appendChild(e))}}},e={},n=function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}(698);tws=n})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHV3ZWxzb2x1dGlvbnMuanMiLCJtYXBwaW5ncyI6Im9EQUNBLElBQUlBLEVBQWFDLE1BQVFBLEtBQUtELFdBQWMsU0FBVUUsRUFBU0MsRUFBWUMsRUFBR0MsR0FFMUUsT0FBTyxJQUFLRCxJQUFNQSxFQUFJRSxXQUFVLFNBQVVDLEVBQVNDLEdBQy9DLFNBQVNDLEVBQVVDLEdBQVMsSUFBTUMsRUFBS04sRUFBVU8sS0FBS0YsSUFBVyxNQUFPRyxHQUFLTCxFQUFPSyxJQUNwRixTQUFTQyxFQUFTSixHQUFTLElBQU1DLEVBQUtOLEVBQWlCLE1BQUVLLElBQVcsTUFBT0csR0FBS0wsRUFBT0ssSUFDdkYsU0FBU0YsRUFBS0ksR0FKbEIsSUFBZUwsRUFJYUssRUFBT0MsS0FBT1QsRUFBUVEsRUFBT0wsUUFKMUNBLEVBSXlESyxFQUFPTCxNQUpoREEsYUFBaUJOLEVBQUlNLEVBQVEsSUFBSU4sR0FBRSxTQUFVRyxHQUFXQSxFQUFRRyxPQUlUTyxLQUFLUixFQUFXSyxHQUNsR0gsR0FBTU4sRUFBWUEsRUFBVWEsTUFBTWhCLEVBQVNDLEdBQWMsS0FBS1MsWUFHbEVPLEVBQWVsQixNQUFRQSxLQUFLa0IsYUFBZ0IsU0FBVWpCLEVBQVNrQixHQUMvRCxJQUFzR0MsRUFBR0MsRUFBR0MsRUFBR0MsRUFBM0dDLEVBQUksQ0FBRUMsTUFBTyxFQUFHQyxLQUFNLFdBQWEsR0FBVyxFQUFQSixFQUFFLEdBQVEsTUFBTUEsRUFBRSxHQUFJLE9BQU9BLEVBQUUsSUFBT0ssS0FBTSxHQUFJQyxJQUFLLElBQ2hHLE9BQU9MLEVBQUksQ0FBRVosS0FBTWtCLEVBQUssR0FBSSxNQUFTQSxFQUFLLEdBQUksT0FBVUEsRUFBSyxJQUF3QixtQkFBWEMsU0FBMEJQLEVBQUVPLE9BQU9DLFVBQVksV0FBYSxPQUFPL0IsT0FBVXVCLEVBQ3ZKLFNBQVNNLEVBQUtHLEdBQUssT0FBTyxTQUFVQyxHQUFLLE9BQ3pDLFNBQWNDLEdBQ1YsR0FBSWQsRUFBRyxNQUFNLElBQUllLFVBQVUsbUNBQzNCLEtBQU9YLE9BQ0gsR0FBSUosRUFBSSxFQUFHQyxJQUFNQyxFQUFZLEVBQVJZLEVBQUcsR0FBU2IsRUFBVSxPQUFJYSxFQUFHLEdBQUtiLEVBQVMsU0FBT0MsRUFBSUQsRUFBVSxTQUFNQyxFQUFFYyxLQUFLZixHQUFJLEdBQUtBLEVBQUVWLFNBQVdXLEVBQUlBLEVBQUVjLEtBQUtmLEVBQUdhLEVBQUcsS0FBS25CLEtBQU0sT0FBT08sRUFFM0osT0FESUQsRUFBSSxFQUFHQyxJQUFHWSxFQUFLLENBQVMsRUFBUkEsRUFBRyxHQUFRWixFQUFFYixRQUN6QnlCLEVBQUcsSUFDUCxLQUFLLEVBQUcsS0FBSyxFQUFHWixFQUFJWSxFQUFJLE1BQ3hCLEtBQUssRUFBYyxPQUFYVixFQUFFQyxRQUFnQixDQUFFaEIsTUFBT3lCLEVBQUcsR0FBSW5CLE1BQU0sR0FDaEQsS0FBSyxFQUFHUyxFQUFFQyxRQUFTSixFQUFJYSxFQUFHLEdBQUlBLEVBQUssQ0FBQyxHQUFJLFNBQ3hDLEtBQUssRUFBR0EsRUFBS1YsRUFBRUksSUFBSVMsTUFBT2IsRUFBRUcsS0FBS1UsTUFBTyxTQUN4QyxRQUNJLE1BQWtCZixHQUFaQSxFQUFJRSxFQUFFRyxNQUFZVyxPQUFTLEdBQUtoQixFQUFFQSxFQUFFZ0IsT0FBUyxLQUFrQixJQUFWSixFQUFHLElBQXNCLElBQVZBLEVBQUcsSUFBVyxDQUFFVixFQUFJLEVBQUcsU0FDakcsR0FBYyxJQUFWVSxFQUFHLE1BQWNaLEdBQU1ZLEVBQUcsR0FBS1osRUFBRSxJQUFNWSxFQUFHLEdBQUtaLEVBQUUsSUFBTSxDQUFFRSxFQUFFQyxNQUFRUyxFQUFHLEdBQUksTUFDOUUsR0FBYyxJQUFWQSxFQUFHLElBQVlWLEVBQUVDLE1BQVFILEVBQUUsR0FBSSxDQUFFRSxFQUFFQyxNQUFRSCxFQUFFLEdBQUlBLEVBQUlZLEVBQUksTUFDN0QsR0FBSVosR0FBS0UsRUFBRUMsTUFBUUgsRUFBRSxHQUFJLENBQUVFLEVBQUVDLE1BQVFILEVBQUUsR0FBSUUsRUFBRUksSUFBSVcsS0FBS0wsR0FBSyxNQUN2RFosRUFBRSxJQUFJRSxFQUFFSSxJQUFJUyxNQUNoQmIsRUFBRUcsS0FBS1UsTUFBTyxTQUV0QkgsRUFBS2YsRUFBS2lCLEtBQUtuQyxFQUFTdUIsR0FDMUIsTUFBT1osR0FBS3NCLEVBQUssQ0FBQyxFQUFHdEIsR0FBSVMsRUFBSSxFQUFLLFFBQVVELEVBQUlFLEVBQUksRUFDdEQsR0FBWSxFQUFSWSxFQUFHLEdBQVEsTUFBTUEsRUFBRyxHQUFJLE1BQU8sQ0FBRXpCLE1BQU95QixFQUFHLEdBQUtBLEVBQUcsUUFBSyxFQUFRbkIsTUFBTSxHQXJCOUJMLENBQUssQ0FBQ3NCLEVBQUdDLE9Bd0I3RE8sT0FBT0MsZUFBZUMsRUFBUyxhQUFjLENBQUVqQyxPQUFPLElBQ3REaUMsRUFBUUMsWUFBY0QsRUFBUUUsa0JBQWUsRUFpQjdDRixFQUFRRSxhQWhCUixTQUFzQkMsR0FDbEIsT0FBTzlDLEVBQVVDLFVBQU0sT0FBUSxHQUFRLFdBRW5DLE9BQU9rQixFQUFZbEIsTUFBTSxTQUFVOEMsR0FDL0IsT0FBUUEsRUFBR3JCLE9BQ1AsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhc0IsTUFBTSwyQ0FBNkNGLElBQ2hGLEtBQUssRUFFRCxNQUFPLENBQUMsRUFER0MsRUFBR3BCLE9BQ2dCc0IsUUFDbEMsS0FBSyxFQUVELE1BQU8sQ0FBQyxFQURJRixFQUFHcEIsZ0JBeUJuQ2dCLEVBQVFDLFlBbEJSLFNBQXFCTSxHQUNqQixPQUFPbEQsRUFBVUMsVUFBTSxPQUFRLEdBQVEsV0FDbkMsT0FBT2tCLEVBQVlsQixNQUFNLFNBQVU4QyxHQUMvQixPQUFRQSxFQUFHckIsT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWFzQixNQUFNLGdEQUFpRCxDQUM1RUcsT0FBUSxNQUNSQyxRQUFTLENBQ0wsZUFBZ0Isb0JBRXBCaEMsS0FBTWlDLEtBQUtDLFVBQVVKLE1BRTdCLEtBQUssRUFFRCxPQURBSCxFQUFHcEIsT0FDSSxDQUFDLFksa0JDcEU1QixJQUNRNEIsRUFESkMsRUFBYXZELE1BQVFBLEtBQUt1RCxZQUN0QkQsRUFBZ0IsU0FBVUUsRUFBR0MsR0FJN0IsT0FIQUgsRUFBZ0JkLE9BQU9rQixnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSixFQUFHQyxHQUFLRCxFQUFFRyxVQUFZRixJQUN2RSxTQUFVRCxFQUFHQyxHQUFLLElBQUssSUFBSUksS0FBS0osRUFBT2pCLE9BQU9zQixVQUFVQyxlQUFlM0IsS0FBS3FCLEVBQUdJLEtBQUlMLEVBQUVLLEdBQUtKLEVBQUVJLEtBQ3pGUCxFQUFjRSxFQUFHQyxJQUVyQixTQUFVRCxFQUFHQyxHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJdEIsVUFBVSx1QkFBeUI2QixPQUFPUCxHQUFLLGlDQUU3RCxTQUFTUSxJQUFPakUsS0FBS2tFLFlBQWNWLEVBRG5DRixFQUFjRSxFQUFHQyxHQUVqQkQsRUFBRU0sVUFBa0IsT0FBTkwsRUFBYWpCLE9BQU8yQixPQUFPVixJQUFNUSxFQUFHSCxVQUFZTCxFQUFFSyxVQUFXLElBQUlHLEtBR3ZGekIsT0FBT0MsZUFBZUMsRUFBUyxhQUFjLENBQUVqQyxPQUFPLElBQ3REaUMsRUFBUTBCLHVCQUF5QjFCLEVBQVEyQixzQkFBbUIsRUFFNUQsSUFBSUEsRUFBa0MsV0FDbEMsU0FBU0EsRUFBaUJDLEdBQ3RCLElBQ0l4QixFQURBeUIsRUFBUXZFLEtBRVpBLEtBQUtzRSxTQUFXQSxFQUNoQixJQUFJRSxFQUFjRixFQUFTRyxjQUFjLGdCQUFnQkMsV0FBVSxHQUNuRUYsRUFBWUcsaUJBQWlCLGdCQUFnQkMsU0FBUSxTQUFVQyxHQUFLLE9BQU9BLEVBQUVDLFlBQzdFOUUsS0FBSytFLEtBQU9QLEVBQVlRLFlBQ3hCaEYsS0FBS2lGLE1BQWlELFFBQXhDbkMsRUFBS3dCLEVBQVNHLGNBQWMsY0FBMkIsSUFBUDNCLE9BQWdCLEVBQVNBLEVBQUdvQyxJQUFJQyxNQUFNLEVBQUcsS0FDdkduRixLQUFLb0YsUUFBVSxHQUNmZCxFQUFTSyxpQkFBaUIsdUJBQXVCQyxTQUFRLFNBQVVTLEdBQy9ELElBQUlDLEVBQU8sR0FDWEQsRUFBT1YsaUJBQWlCLFVBQVVDLFNBQVEsU0FBVVcsR0FDaERELEVBQUsvQyxLQUFLLENBQ05nRCxPQUFRQSxFQUNSRixPQUFRQSxPQUdoQmQsRUFBTWEsUUFBUTdDLEtBQUsrQyxNQXlCM0IsT0FsQkFqQixFQUFpQlAsVUFBVTBCLFFBQVUsU0FBVWxCLEdBQzNDLE1BQXdCLGVBQWpCQSxFQUFTbUIsTUFBeUJuQixFQUFTUyxNQUFRL0UsS0FBSytFLE1BQVFULEVBQVNvQixTQUFXMUYsS0FBS2lGLE9BTXBHWixFQUFpQlAsVUFBVTZCLE1BQVEsU0FBVUMsR0FFekM1RixLQUFLb0YsUUFBUVIsU0FBUSxTQUFVaUIsRUFBYUMsR0FFeENELEVBQVlqQixTQUFRLFNBQVVDLEdBQzFCQSxFQUFFVSxPQUFPUSxTQUFXbEIsRUFBRVUsT0FBT1MsV0FBYUosRUFBU1IsUUFBUVUsR0FDdkRqQixFQUFFVSxPQUFPUSxXQUNUbEIsRUFBRVEsT0FBTzVFLE1BQVFvRSxFQUFFVSxPQUFPOUUsY0FJbkM0RCxFQTNDMEIsR0E2Q3JDM0IsRUFBUTJCLGlCQUFtQkEsRUFFM0IsSUFBSUQsRUFBd0MsU0FBVTZCLEdBRWxELFNBQVM3QixFQUF1QkUsR0FDNUIsSUFBSUMsRUFBUTBCLEVBQU83RCxLQUFLcEMsS0FBTXNFLElBQWF0RSxLQUN2QzRGLEVBQVcsR0FLZixPQUpBdEIsRUFBU0ssaUJBQWlCLGlCQUFpQkMsU0FBUSxTQUFVc0IsR0FDekROLEVBQVNyRCxLQUFLMkQsRUFBS0MsVUFBVUMsTUFBTSxRQUFRLEdBQUdBLE1BQU0sTUFBTSxPQUU5RDdCLEVBQU04QixlQUFpQlQsRUFDaEJyQixFQWNYLE9BdEJBaEIsRUFBVWEsRUFBd0I2QixHQWNsQzdCLEVBQXVCTixVQUFVd0MsT0FBUyxXQUN0QyxNQUFPLENBQ0hiLEtBQU0sY0FDTlYsS0FBTS9FLEtBQUsrRSxLQUNYVyxRQUFTMUYsS0FBS2lGLE1BQ2RHLFFBQVNwRixLQUFLcUcsaUJBR2ZqQyxFQXZCZ0MsQ0F3QnpDQyxHQUNGM0IsRUFBUTBCLHVCQUF5QkEsRyxrQkMxRmpDLElBQ1FkLEVBREpDLEVBQWF2RCxNQUFRQSxLQUFLdUQsWUFDdEJELEVBQWdCLFNBQVVFLEVBQUdDLEdBSTdCLE9BSEFILEVBQWdCZCxPQUFPa0IsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUosRUFBR0MsR0FBS0QsRUFBRUcsVUFBWUYsSUFDdkUsU0FBVUQsRUFBR0MsR0FBSyxJQUFLLElBQUlJLEtBQUtKLEVBQU9qQixPQUFPc0IsVUFBVUMsZUFBZTNCLEtBQUtxQixFQUFHSSxLQUFJTCxFQUFFSyxHQUFLSixFQUFFSSxLQUN6RlAsRUFBY0UsRUFBR0MsSUFFckIsU0FBVUQsRUFBR0MsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSXRCLFVBQVUsdUJBQXlCNkIsT0FBT1AsR0FBSyxpQ0FFN0QsU0FBU1EsSUFBT2pFLEtBQUtrRSxZQUFjVixFQURuQ0YsRUFBY0UsRUFBR0MsR0FFakJELEVBQUVNLFVBQWtCLE9BQU5MLEVBQWFqQixPQUFPMkIsT0FBT1YsSUFBTVEsRUFBR0gsVUFBWUwsRUFBRUssVUFBVyxJQUFJRyxLQUd2RnpCLE9BQU9DLGVBQWVDLEVBQVMsYUFBYyxDQUFFakMsT0FBTyxJQUN0RGlDLEVBQVE2RCx1QkFBeUI3RCxFQUFROEQsc0JBQW1CLEVBRTVELElBQUlBLEVBQWtDLFdBQ2xDLFNBQVNBLEVBQWlCbEMsR0FDdEIsSUFDSXhCLEVBREF5QixFQUFRdkUsS0FFWkEsS0FBS3NFLFNBQVdBLEVBQ2hCdEUsS0FBSytFLEtBQU9ULEVBQVNHLGNBQWMsVUFBVXVCLFVBQzdDaEcsS0FBS2lGLE1BQWlELFFBQXhDbkMsRUFBS3dCLEVBQVNHLGNBQWMsY0FBMkIsSUFBUDNCLE9BQWdCLEVBQVNBLEVBQUdvQyxJQUFJQyxNQUFNLEVBQUcsS0FDdkduRixLQUFLb0YsUUFBVSxHQUNmZCxFQUFTSyxpQkFBaUIsaUJBQWlCQyxTQUFRLFNBQVU2QixHQUN6RGxDLEVBQU1hLFFBQVE3QyxLQUFLLENBQ2Z3QyxLQUFNMEIsRUFBT1QsVUFDYlUsUUFBU0QsRUFBT2hDLGNBQWMsMkJBd0IxQyxPQWhCQStCLEVBQWlCMUMsVUFBVTBCLFFBQVUsU0FBVWxCLEdBQzNDLE1BQXdCLGVBQWpCQSxFQUFTbUIsTUFBeUJuQixFQUFTUyxNQUFRL0UsS0FBSytFLE1BQVFULEVBQVNvQixTQUFXMUYsS0FBS2lGLE9BTXBHdUIsRUFBaUIxQyxVQUFVNkIsTUFBUSxTQUFVQyxHQUV6QzVGLEtBQUtvRixRQUFRUixTQUFRLFNBQVU2QixHQUV2QmIsRUFBU1IsUUFBUXVCLE1BQUssU0FBVTVCLEdBQVEsT0FBTzBCLEVBQU8xQixNQUFRQSxNQUM5RDBCLEVBQU9DLFFBQVFFLFlBSXBCSixFQW5DMEIsR0FxQ3JDOUQsRUFBUThELGlCQUFtQkEsRUFFM0IsSUFBSUQsRUFBd0MsU0FBVU4sR0FFbEQsU0FBU00sRUFBdUJqQyxHQUM1QixJQUFJQyxFQUFRMEIsRUFBTzdELEtBQUtwQyxLQUFNc0UsSUFBYXRFLEtBQ3ZDNEYsRUFBV3RCLEVBQVNHLGNBQWMsZ0JBQWdCdUIsVUFNdEQsT0FMQXpCLEVBQU04QixlQUFpQlQsRUFDbEJpQixVQUFVakIsRUFBU2tCLFFBQVEsS0FBTyxHQUNsQ0MsT0FDQVgsTUFBTSxLQUNOWSxLQUFJLFNBQVVDLEdBQUssT0FBT0EsRUFBRUYsVUFDMUJ4QyxFQWNYLE9BdkJBaEIsRUFBVWdELEVBQXdCTixHQWVsQ00sRUFBdUJ6QyxVQUFVd0MsT0FBUyxXQUN0QyxNQUFPLENBQ0hiLEtBQU0sY0FDTlYsS0FBTS9FLEtBQUsrRSxLQUNYVyxRQUFTMUYsS0FBS2lGLE1BQ2RHLFFBQVNwRixLQUFLcUcsaUJBR2ZFLEVBeEJnQyxDQXlCekNDLEdBQ0Y5RCxFQUFRNkQsdUJBQXlCQSxHLG9CQ25GakMsSUFBSXhHLEVBQWFDLE1BQVFBLEtBQUtELFdBQWMsU0FBVUUsRUFBU0MsRUFBWUMsRUFBR0MsR0FFMUUsT0FBTyxJQUFLRCxJQUFNQSxFQUFJRSxXQUFVLFNBQVVDLEVBQVNDLEdBQy9DLFNBQVNDLEVBQVVDLEdBQVMsSUFBTUMsRUFBS04sRUFBVU8sS0FBS0YsSUFBVyxNQUFPRyxHQUFLTCxFQUFPSyxJQUNwRixTQUFTQyxFQUFTSixHQUFTLElBQU1DLEVBQUtOLEVBQWlCLE1BQUVLLElBQVcsTUFBT0csR0FBS0wsRUFBT0ssSUFDdkYsU0FBU0YsRUFBS0ksR0FKbEIsSUFBZUwsRUFJYUssRUFBT0MsS0FBT1QsRUFBUVEsRUFBT0wsUUFKMUNBLEVBSXlESyxFQUFPTCxNQUpoREEsYUFBaUJOLEVBQUlNLEVBQVEsSUFBSU4sR0FBRSxTQUFVRyxHQUFXQSxFQUFRRyxPQUlUTyxLQUFLUixFQUFXSyxHQUNsR0gsR0FBTU4sRUFBWUEsRUFBVWEsTUFBTWhCLEVBQVNDLEdBQWMsS0FBS1MsWUFHbEVPLEVBQWVsQixNQUFRQSxLQUFLa0IsYUFBZ0IsU0FBVWpCLEVBQVNrQixHQUMvRCxJQUFzR0MsRUFBR0MsRUFBR0MsRUFBR0MsRUFBM0dDLEVBQUksQ0FBRUMsTUFBTyxFQUFHQyxLQUFNLFdBQWEsR0FBVyxFQUFQSixFQUFFLEdBQVEsTUFBTUEsRUFBRSxHQUFJLE9BQU9BLEVBQUUsSUFBT0ssS0FBTSxHQUFJQyxJQUFLLElBQ2hHLE9BQU9MLEVBQUksQ0FBRVosS0FBTWtCLEVBQUssR0FBSSxNQUFTQSxFQUFLLEdBQUksT0FBVUEsRUFBSyxJQUF3QixtQkFBWEMsU0FBMEJQLEVBQUVPLE9BQU9DLFVBQVksV0FBYSxPQUFPL0IsT0FBVXVCLEVBQ3ZKLFNBQVNNLEVBQUtHLEdBQUssT0FBTyxTQUFVQyxHQUFLLE9BQ3pDLFNBQWNDLEdBQ1YsR0FBSWQsRUFBRyxNQUFNLElBQUllLFVBQVUsbUNBQzNCLEtBQU9YLE9BQ0gsR0FBSUosRUFBSSxFQUFHQyxJQUFNQyxFQUFZLEVBQVJZLEVBQUcsR0FBU2IsRUFBVSxPQUFJYSxFQUFHLEdBQUtiLEVBQVMsU0FBT0MsRUFBSUQsRUFBVSxTQUFNQyxFQUFFYyxLQUFLZixHQUFJLEdBQUtBLEVBQUVWLFNBQVdXLEVBQUlBLEVBQUVjLEtBQUtmLEVBQUdhLEVBQUcsS0FBS25CLEtBQU0sT0FBT08sRUFFM0osT0FESUQsRUFBSSxFQUFHQyxJQUFHWSxFQUFLLENBQVMsRUFBUkEsRUFBRyxHQUFRWixFQUFFYixRQUN6QnlCLEVBQUcsSUFDUCxLQUFLLEVBQUcsS0FBSyxFQUFHWixFQUFJWSxFQUFJLE1BQ3hCLEtBQUssRUFBYyxPQUFYVixFQUFFQyxRQUFnQixDQUFFaEIsTUFBT3lCLEVBQUcsR0FBSW5CLE1BQU0sR0FDaEQsS0FBSyxFQUFHUyxFQUFFQyxRQUFTSixFQUFJYSxFQUFHLEdBQUlBLEVBQUssQ0FBQyxHQUFJLFNBQ3hDLEtBQUssRUFBR0EsRUFBS1YsRUFBRUksSUFBSVMsTUFBT2IsRUFBRUcsS0FBS1UsTUFBTyxTQUN4QyxRQUNJLE1BQWtCZixHQUFaQSxFQUFJRSxFQUFFRyxNQUFZVyxPQUFTLEdBQUtoQixFQUFFQSxFQUFFZ0IsT0FBUyxLQUFrQixJQUFWSixFQUFHLElBQXNCLElBQVZBLEVBQUcsSUFBVyxDQUFFVixFQUFJLEVBQUcsU0FDakcsR0FBYyxJQUFWVSxFQUFHLE1BQWNaLEdBQU1ZLEVBQUcsR0FBS1osRUFBRSxJQUFNWSxFQUFHLEdBQUtaLEVBQUUsSUFBTSxDQUFFRSxFQUFFQyxNQUFRUyxFQUFHLEdBQUksTUFDOUUsR0FBYyxJQUFWQSxFQUFHLElBQVlWLEVBQUVDLE1BQVFILEVBQUUsR0FBSSxDQUFFRSxFQUFFQyxNQUFRSCxFQUFFLEdBQUlBLEVBQUlZLEVBQUksTUFDN0QsR0FBSVosR0FBS0UsRUFBRUMsTUFBUUgsRUFBRSxHQUFJLENBQUVFLEVBQUVDLE1BQVFILEVBQUUsR0FBSUUsRUFBRUksSUFBSVcsS0FBS0wsR0FBSyxNQUN2RFosRUFBRSxJQUFJRSxFQUFFSSxJQUFJUyxNQUNoQmIsRUFBRUcsS0FBS1UsTUFBTyxTQUV0QkgsRUFBS2YsRUFBS2lCLEtBQUtuQyxFQUFTdUIsR0FDMUIsTUFBT1osR0FBS3NCLEVBQUssQ0FBQyxFQUFHdEIsR0FBSVMsRUFBSSxFQUFLLFFBQVVELEVBQUlFLEVBQUksRUFDdEQsR0FBWSxFQUFSWSxFQUFHLEdBQVEsTUFBTUEsRUFBRyxHQUFJLE1BQU8sQ0FBRXpCLE1BQU95QixFQUFHLEdBQUtBLEVBQUcsUUFBSyxFQUFRbkIsTUFBTSxHQXJCOUJMLENBQUssQ0FBQ3NCLEVBQUdDLE9Bd0I3RE8sT0FBT0MsZUFBZUMsRUFBUyxhQUFjLENBQUVqQyxPQUFPLElBQ3REaUMsRUFBUXdFLFdBQVEsRUFDaEIsSUFBSUMsRUFBUSxFQUFRLEtBQ2hCQyxFQUFnQixFQUFRLEtBQ3hCQyxFQUFnQixFQUFRLEtBQzVCLFNBQVNDLElBQ0wsT0FBT3ZILEVBQVVDLFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUl1SCxFQUFRQyxFQUNaLE9BQU90RyxFQUFZbEIsTUFBTSxTQUFVeUgsR0FDL0IsT0FBUUEsRUFBR2hHLE9BQ1AsS0FBSyxFQUNEOEYsRUFBU0csT0FBT0MsU0FBU0MsT0FDcEJDLFFBQVEsSUFBSyxJQUNiekIsTUFBTSxLQUNOMEIsTUFBSyxTQUFVQyxHQUFTLE9BQU9BLEVBQU1qQixRQUFRLFNBQVcsS0FDeERlLFFBQVEsUUFBUyxJQUN0QkwsT0FBa0JRLEVBQ2xCUCxFQUFHaEcsTUFBUSxFQUNmLEtBQUssRUFFRCxPQURBZ0csRUFBRzlGLEtBQUtZLEtBQUssQ0FBQyxFQUFHLEVBQUcsQ0FBRSxJQUNmLENBQUMsR0FBYSxFQUFJNEUsRUFBTXZFLGNBQWMyRSxJQUNqRCxLQUFLLEVBRUQsT0FEQUMsRUFBa0JDLEVBQUcvRixPQUNkLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBR0QsT0FGSytGLEVBQUcvRixPQUNSdUcsUUFBUUMsUUFBUSxpQ0FDVCxDQUFDLEdBQ1osS0FBSyxFQTRCRCxPQTNCQUQsUUFBUUUsSUFBSSxrQ0FBbUNYLEdBRS9DWSxTQUFTekQsaUJBQWlCLFFBQVFDLFNBQVEsU0FBVU4sR0FFaEQsR0FBSUEsRUFBUytELFVBQVVDLFNBQVMsZUFBZ0IsQ0FDNUMsSUFBSUMsRUFBa0IsSUFBSWxCLEVBQWNiLGlCQUFpQmxDLEdBRXpEa0QsTUFBQUEsR0FBa0VBLEVBQWdCZ0IsVUFBVTVELFNBQVEsU0FBVWdCLEdBQ3RHMkMsRUFBZ0IvQyxRQUFRSSxLQUN4QjJDLEVBQWdCNUMsTUFBTUMsR0FDdEJxQyxRQUFRRSxJQUFJLHFCQUFzQkksT0FLOUMsR0FBSWpFLEVBQVMrRCxVQUFVQyxTQUFTLGVBQWdCLENBQzVDLElBQUlHLEVBQW1CLElBQUlyQixFQUFjL0MsaUJBQWlCQyxHQUUxRGtELE1BQUFBLEdBQWtFQSxFQUFnQmdCLFVBQVU1RCxTQUFRLFNBQVVnQixHQUN0RzZDLEVBQWlCakQsUUFBUUksS0FDekI2QyxFQUFpQjlDLE1BQU1DLEdBQ3ZCcUMsUUFBUUUsSUFBSSxxQkFBc0JNLFdBS2xEUixRQUFRRSxJQUFJLDhCQUNMLENBQUMsVUFTNUIsU0FBU08sSUFDTCxPQUFPM0ksRUFBVUMsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSXVILEVBQVFvQixFQUFXQyxFQUN2QixPQUFPMUgsRUFBWWxCLE1BQU0sU0FBVThDLEdBQy9CLE9BQVFBLEVBQUdyQixPQUNQLEtBQUssRUFzQkQsT0FyQkE4RixFQUFTRyxPQUFPQyxTQUFTQyxPQUNwQkMsUUFBUSxJQUFLLElBQ2J6QixNQUFNLEtBQ04wQixNQUFLLFNBQVVDLEdBQVMsT0FBT0EsRUFBTWpCLFFBQVEsU0FBVyxLQUN4RGUsUUFBUSxRQUFTLElBQ3RCYyxFQUFZLEdBQ1pQLFNBQVN6RCxpQkFBaUIsUUFBUUMsU0FBUSxTQUFVTixHQUU1Q0EsRUFBUytELFVBQVVDLFNBQVMsZUFDNUJLLEVBQVVwRyxLQUFLLElBQUk4RSxFQUFjZCx1QkFBdUJqQyxHQUFVZ0MsVUFHN0RoQyxFQUFTK0QsVUFBVUMsU0FBUyxnQkFDakNLLEVBQVVwRyxLQUFLLElBQUk2RSxFQUFjaEQsdUJBQXVCRSxHQUFVZ0MsYUFHMUVzQyxFQUFhLENBQ1QzRixLQUFNc0UsRUFDTmlCLFVBQVdHLEdBR1IsQ0FBQyxHQUFhLEVBQUl4QixFQUFNeEUsYUFBYWlHLElBQ2hELEtBQUssRUFHRCxPQURBOUYsRUFBR3BCLE9BQ0ksQ0FBQyxVQXNCNUJnQixFQUFRd0UsTUFoQlIsV0FDSSxJQUFJMkIsRUFBTVQsU0FBUzNELGNBQWMsYUFDN0JxRSxFQUFhVixTQUFTVyxjQUFjLEtBQ3hDRCxFQUFXRSxLQUFPLElBQ2xCLElBQUlDLEVBQU92QixPQUFPQyxTQUFTdUIsU0FBUzlDLE1BQU0sS0FBSytDLFVBQVUsR0FDN0MsZUFBUkYsR0FDQUgsRUFBVzlDLFVBQVksMkJBQ3ZCOEMsRUFBV00saUJBQWlCLFFBQVM5QixHQUNyQ3VCLEVBQUlRLFlBQVlQLElBRUgsY0FBUkcsSUFDTEgsRUFBVzlDLFVBQVksMkJBQ3ZCOEMsRUFBV00saUJBQWlCLFFBQVNWLEdBQ3JDRyxFQUFJUSxZQUFZUCxPQ3ZKcEJRLEVBQTJCLEdDRTNCQyxFRENKLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSixFQUF5QkcsR0FDNUMsUUFBcUJ6QixJQUFqQjBCLEVBQ0gsT0FBT0EsRUFBYWhILFFBR3JCLElBQUlpSCxFQUFTTCxFQUF5QkcsR0FBWSxDQUdqRC9HLFFBQVMsSUFPVixPQUhBa0gsRUFBb0JILEdBQVVySCxLQUFLdUgsRUFBT2pILFFBQVNpSCxFQUFRQSxFQUFPakgsUUFBUzhHLEdBR3BFRyxFQUFPakgsUUNsQlc4RyxDQUFvQixLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHdzLy4vc3JjL2FwaS50cyIsIndlYnBhY2s6Ly90d3MvLi9zcmMvbXVsdGlhbnN3ZXIudHMiLCJ3ZWJwYWNrOi8vdHdzLy4vc3JjL211bHRpY2hvaWNlLnRzIiwid2VicGFjazovL3R3cy8uL3NyYy90dXdlbHNvbHV0aW9ucy50cyIsIndlYnBhY2s6Ly90d3Mvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdHdzL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5zZXRTb2x1dGlvbiA9IGV4cG9ydHMuZ2V0U29sdXRpb25zID0gdm9pZCAwO1xyXG5mdW5jdGlvbiBnZXRTb2x1dGlvbnMoaWQpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzcG9uc2UsIHNvbHV0aW9ucztcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgZmV0Y2goXCJodHRwczovL3R1d2Vsc29sdXRpb24ueGVydXMuYXQvc29sdXRpb24vXCIgKyBpZCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgc29sdXRpb25zID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBzb2x1dGlvbnNdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5leHBvcnRzLmdldFNvbHV0aW9ucyA9IGdldFNvbHV0aW9ucztcclxuZnVuY3Rpb24gc2V0U29sdXRpb24ocXVpeikge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBmZXRjaCgnaHR0cHM6Ly90dXdlbHNvbHV0aW9uLnhlcnVzLmF0L3NvbHV0aW9uL3NhdmUvJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHF1aXopXHJcbiAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmV4cG9ydHMuc2V0U29sdXRpb24gPSBzZXRTb2x1dGlvbjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuVHV3ZWxNdWx0aWFuc3dlclNvbHZlZCA9IGV4cG9ydHMuVHV3ZWxNdWx0aWFuc3dlciA9IHZvaWQgMDtcclxuLyoqIGJhc2UgY2xhc3MgZm9yIHR1d2VsIG11bHRpYW5zd2VyIHF1ZXN0aW9ucyAqL1xyXG52YXIgVHV3ZWxNdWx0aWFuc3dlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFR1d2VsTXVsdGlhbnN3ZXIocXVlc3Rpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICB0aGlzLnF1ZXN0aW9uID0gcXVlc3Rpb247XHJcbiAgICAgICAgdmFyIGZvcm11bGF0aW9uID0gcXVlc3Rpb24ucXVlcnlTZWxlY3RvcihcIi5mb3JtdWxhdGlvblwiKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgZm9ybXVsYXRpb24ucXVlcnlTZWxlY3RvckFsbChcIi5zdWJxdWVzdGlvblwiKS5mb3JFYWNoKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLnJlbW92ZSgpOyB9KTtcclxuICAgICAgICB0aGlzLnRleHQgPSBmb3JtdWxhdGlvbi50ZXh0Q29udGVudDtcclxuICAgICAgICB0aGlzLmltYWdlID0gKF9hID0gcXVlc3Rpb24ucXVlcnlTZWxlY3RvcihcImltZ1wiKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNyYy5zbGljZSgwLCAxMDAwMCk7XHJcbiAgICAgICAgdGhpcy5hbnN3ZXJzID0gW107XHJcbiAgICAgICAgcXVlc3Rpb24ucXVlcnlTZWxlY3RvckFsbChcIi5zdWJxdWVzdGlvbiBzZWxlY3RcIikuZm9yRWFjaChmdW5jdGlvbiAoc2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciBvcHRzID0gW107XHJcbiAgICAgICAgICAgIHNlbGVjdC5xdWVyeVNlbGVjdG9yQWxsKFwib3B0aW9uXCIpLmZvckVhY2goZnVuY3Rpb24gKG9wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgb3B0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb246IG9wdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Q6IHNlbGVjdFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBfdGhpcy5hbnN3ZXJzLnB1c2gob3B0cyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIGV2YWx1YXRlcyBpZiB0aGlzIHF1ZXN0aW9uIGlzIGVxdWFsIHRvIGFub3RoZXJcclxuICAgICAqIEBwYXJhbSBxdWVzdGlvblxyXG4gICAgICovXHJcbiAgICBUdXdlbE11bHRpYW5zd2VyLnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKHF1ZXN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHF1ZXN0aW9uLnR5cGUgPT0gXCJtdWx0aWFuc3dlclwiICYmIHF1ZXN0aW9uLnRleHQgPT0gdGhpcy50ZXh0ICYmIHF1ZXN0aW9uLmltZ0hhc2ggPT0gdGhpcy5pbWFnZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIHRpY2tzIHRoZSBwcm92aWRlZCBjb3JyZWN0IHNvbHV0aW9ucyBvZiBhbiBxdWVzdGlvbnMgYW5zd2VyXHJcbiAgICAgKiBAcGFyYW0gc29sdXRpb24gdGhlIHNvbHV0aW9ucyBmb3IgdGhpcyBxdWVzdGlvblxyXG4gICAgICovXHJcbiAgICBUdXdlbE11bHRpYW5zd2VyLnByb3RvdHlwZS5zb2x2ZSA9IGZ1bmN0aW9uIChzb2x1dGlvbikge1xyXG4gICAgICAgIC8qIGxvb3AgdGhyb3VnaCBhdmFpbGFibGUgYW5zd2VycyAqL1xyXG4gICAgICAgIHRoaXMuYW5zd2Vycy5mb3JFYWNoKGZ1bmN0aW9uIChzdWJxdWVzdGlvbiwgaW5kZXgpIHtcclxuICAgICAgICAgICAgLyogc2V0IHNlbGVjdCB2YWx1ZSAqL1xyXG4gICAgICAgICAgICBzdWJxdWVzdGlvbi5mb3JFYWNoKGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgICAgICBzLm9wdGlvbi5zZWxlY3RlZCA9IHMub3B0aW9uLmlubmVyVGV4dCA9PSBzb2x1dGlvbi5hbnN3ZXJzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmIChzLm9wdGlvbi5zZWxlY3RlZClcclxuICAgICAgICAgICAgICAgICAgICBzLnNlbGVjdC52YWx1ZSA9IHMub3B0aW9uLnZhbHVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVHV3ZWxNdWx0aWFuc3dlcjtcclxufSgpKTtcclxuZXhwb3J0cy5UdXdlbE11bHRpYW5zd2VyID0gVHV3ZWxNdWx0aWFuc3dlcjtcclxuLyoqIGNsYXNzIHRvIGhhbmRsZSBhIG11bHRpY2hvaWNlIHJlc3VsdCAqL1xyXG52YXIgVHV3ZWxNdWx0aWFuc3dlclNvbHZlZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhUdXdlbE11bHRpYW5zd2VyU29sdmVkLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVHV3ZWxNdWx0aWFuc3dlclNvbHZlZChxdWVzdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHF1ZXN0aW9uKSB8fCB0aGlzO1xyXG4gICAgICAgIHZhciBzb2x1dGlvbiA9IFtdO1xyXG4gICAgICAgIHF1ZXN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZmVlZGJhY2tzcGFuXCIpLmZvckVhY2goZnVuY3Rpb24gKHN1YnEpIHtcclxuICAgICAgICAgICAgc29sdXRpb24ucHVzaChzdWJxLmlubmVySFRNTC5zcGxpdChcIjxicj5cIilbMV0uc3BsaXQoXCI6IFwiKVsxXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgX3RoaXMuY29ycmVjdEFuc3dlcnMgPSBzb2x1dGlvbjtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIGNvbnZlcnRzIHRoaXMgcXVlc3Rpb24gdG8gdGhlIGRiIGpzb24gaW50ZXJmYWNlXHJcbiAgICAgKiBAcmV0dXJucyBxdWVzdGlvbiBvYmplY3RcclxuICAgICAqL1xyXG4gICAgVHV3ZWxNdWx0aWFuc3dlclNvbHZlZC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwibXVsdGlhbnN3ZXJcIixcclxuICAgICAgICAgICAgdGV4dDogdGhpcy50ZXh0LFxyXG4gICAgICAgICAgICBpbWdIYXNoOiB0aGlzLmltYWdlLFxyXG4gICAgICAgICAgICBhbnN3ZXJzOiB0aGlzLmNvcnJlY3RBbnN3ZXJzXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVHV3ZWxNdWx0aWFuc3dlclNvbHZlZDtcclxufShUdXdlbE11bHRpYW5zd2VyKSk7XHJcbmV4cG9ydHMuVHV3ZWxNdWx0aWFuc3dlclNvbHZlZCA9IFR1d2VsTXVsdGlhbnN3ZXJTb2x2ZWQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlR1d2VsTXVsdGljaG9pY2VTb2x2ZWQgPSBleHBvcnRzLlR1d2VsTXVsdGljaG9pY2UgPSB2b2lkIDA7XHJcbi8qKiBiYXNlIGNsYXNzIGZvciB0dXdlbCBtdWx0aWNob2ljZSBxdWVzdGlvbnMgKi9cclxudmFyIFR1d2VsTXVsdGljaG9pY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUdXdlbE11bHRpY2hvaWNlKHF1ZXN0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgdGhpcy5xdWVzdGlvbiA9IHF1ZXN0aW9uO1xyXG4gICAgICAgIHRoaXMudGV4dCA9IHF1ZXN0aW9uLnF1ZXJ5U2VsZWN0b3IoXCIucXRleHRcIikuaW5uZXJUZXh0O1xyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSAoX2EgPSBxdWVzdGlvbi5xdWVyeVNlbGVjdG9yKFwiaW1nXCIpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3JjLnNsaWNlKDAsIDEwMDAwKTtcclxuICAgICAgICB0aGlzLmFuc3dlcnMgPSBbXTtcclxuICAgICAgICBxdWVzdGlvbi5xdWVyeVNlbGVjdG9yQWxsKFwiLmFuc3dlciA+IGRpdlwiKS5mb3JFYWNoKGZ1bmN0aW9uIChhbnN3ZXIpIHtcclxuICAgICAgICAgICAgX3RoaXMuYW5zd2Vycy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IGFuc3dlci5pbm5lclRleHQsXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBhbnN3ZXIucXVlcnlTZWxlY3RvcihcImlucHV0Om50aC1jaGlsZCgyKVwiKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogZXZhbHVhdGVzIGlmIHRoaXMgcXVlc3Rpb24gaXMgZXF1YWwgdG8gYW5vdGhlclxyXG4gICAgICogQHBhcmFtIHF1ZXN0aW9uXHJcbiAgICAgKi9cclxuICAgIFR1d2VsTXVsdGljaG9pY2UucHJvdG90eXBlLm1hdGNoZXMgPSBmdW5jdGlvbiAocXVlc3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gcXVlc3Rpb24udHlwZSA9PSBcIm11bHRpY2hvaWNlXCIgJiYgcXVlc3Rpb24udGV4dCA9PSB0aGlzLnRleHQgJiYgcXVlc3Rpb24uaW1nSGFzaCA9PSB0aGlzLmltYWdlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogdGlja3MgdGhlIHByb3ZpZGVkIGNvcnJlY3Qgc29sdXRpb25zIG9mIGFuIHF1ZXN0aW9ucyBhbnN3ZXJcclxuICAgICAqIEBwYXJhbSBzb2x1dGlvbiB0aGUgc29sdXRpb25zIGZvciB0aGlzIHF1ZXN0aW9uXHJcbiAgICAgKi9cclxuICAgIFR1d2VsTXVsdGljaG9pY2UucHJvdG90eXBlLnNvbHZlID0gZnVuY3Rpb24gKHNvbHV0aW9uKSB7XHJcbiAgICAgICAgLyogbG9vcCB0aHJvdWdoIGF2YWlsYWJsZSBhbnN3ZXJzICovXHJcbiAgICAgICAgdGhpcy5hbnN3ZXJzLmZvckVhY2goZnVuY3Rpb24gKGFuc3dlcikge1xyXG4gICAgICAgICAgICAvKiBpZiBhbnN3ZXIgaXMgaW4gY29ycmVjdCBhbnN3ZXJzLCBjbGljayBpdCAqL1xyXG4gICAgICAgICAgICBpZiAoc29sdXRpb24uYW5zd2Vycy5zb21lKGZ1bmN0aW9uICh0ZXh0KSB7IHJldHVybiBhbnN3ZXIudGV4dCA9PSB0ZXh0OyB9KSkge1xyXG4gICAgICAgICAgICAgICAgYW5zd2VyLmVsZW1lbnQuY2xpY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUdXdlbE11bHRpY2hvaWNlO1xyXG59KCkpO1xyXG5leHBvcnRzLlR1d2VsTXVsdGljaG9pY2UgPSBUdXdlbE11bHRpY2hvaWNlO1xyXG4vKiogY2xhc3MgdG8gaGFuZGxlIGEgbXVsdGljaG9pY2UgcmVzdWx0ICovXHJcbnZhciBUdXdlbE11bHRpY2hvaWNlU29sdmVkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFR1d2VsTXVsdGljaG9pY2VTb2x2ZWQsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBUdXdlbE11bHRpY2hvaWNlU29sdmVkKHF1ZXN0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcXVlc3Rpb24pIHx8IHRoaXM7XHJcbiAgICAgICAgdmFyIHNvbHV0aW9uID0gcXVlc3Rpb24ucXVlcnlTZWxlY3RvcihcIi5yaWdodGFuc3dlclwiKS5pbm5lclRleHQ7XHJcbiAgICAgICAgX3RoaXMuY29ycmVjdEFuc3dlcnMgPSBzb2x1dGlvblxyXG4gICAgICAgICAgICAuc3Vic3RyaW5nKHNvbHV0aW9uLmluZGV4T2YoXCI6XCIpICsgMSlcclxuICAgICAgICAgICAgLnRyaW0oKVxyXG4gICAgICAgICAgICAuc3BsaXQoXCIsXCIpXHJcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGEudHJpbSgpOyB9KTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIGNvbnZlcnRzIHRoaXMgcXVlc3Rpb24gdG8gdGhlIGRiIGpzb24gaW50ZXJmYWNlXHJcbiAgICAgKiBAcmV0dXJucyBxdWVzdGlvbiBvYmplY3RcclxuICAgICAqL1xyXG4gICAgVHV3ZWxNdWx0aWNob2ljZVNvbHZlZC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwibXVsdGljaG9pY2VcIixcclxuICAgICAgICAgICAgdGV4dDogdGhpcy50ZXh0LFxyXG4gICAgICAgICAgICBpbWdIYXNoOiB0aGlzLmltYWdlLFxyXG4gICAgICAgICAgICBhbnN3ZXJzOiB0aGlzLmNvcnJlY3RBbnN3ZXJzXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVHV3ZWxNdWx0aWNob2ljZVNvbHZlZDtcclxufShUdXdlbE11bHRpY2hvaWNlKSk7XHJcbmV4cG9ydHMuVHV3ZWxNdWx0aWNob2ljZVNvbHZlZCA9IFR1d2VsTXVsdGljaG9pY2VTb2x2ZWQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLnNldHVwID0gdm9pZCAwO1xyXG52YXIgYXBpXzEgPSByZXF1aXJlKFwiLi9hcGlcIik7XHJcbnZhciBtdWx0aWFuc3dlcl8xID0gcmVxdWlyZShcIi4vbXVsdGlhbnN3ZXJcIik7XHJcbnZhciBtdWx0aWNob2ljZV8xID0gcmVxdWlyZShcIi4vbXVsdGljaG9pY2VcIik7XHJcbmZ1bmN0aW9uIHNvbHZlUXVpeigpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcXVpeklELCBjdXJyZW50U29sdXRpb24sIF9hO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIHF1aXpJRCA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoXCI/XCIsIFwiXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zcGxpdChcIiZcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoZnVuY3Rpb24gKHBhcmFtKSB7IHJldHVybiBwYXJhbS5pbmRleE9mKFwiY21pZFwiKSA+PSAwOyB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShcImNtaWQ9XCIsIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTb2x1dGlvbiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgX2IudHJ5cy5wdXNoKFsxLCAzLCAsIDRdKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCAoMCwgYXBpXzEuZ2V0U29sdXRpb25zKShxdWl6SUQpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U29sdXRpb24gPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgX2EgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS50aW1lTG9nKFwiTm8gc29sdXRpb25zIGZvciB0aGlzIHF1aXogOi9cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZm91bmQgc29sdXRpb25zIGZvciB0aGlzIHF1aXo6IFwiLCBjdXJyZW50U29sdXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCBxdWVzdGlvbnMgZnJvbSBkb2N1bWVudCBhbmQgc29sdmUgdGhlbVxyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucXVlXCIpLmZvckVhY2goZnVuY3Rpb24gKHF1ZXN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGl0J3MgYSBtdWx0aXBsZSBjaG9pY2UgcXVlc3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXN0aW9uLmNsYXNzTGlzdC5jb250YWlucyhcIm11bHRpY2hvaWNlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tRdWVzdGlvbl8xID0gbmV3IG11bHRpY2hvaWNlXzEuVHV3ZWxNdWx0aWNob2ljZShxdWVzdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWFyY2ggZm9yIG1hdGNoaW5nIHNvbHV0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNvbHV0aW9uID09PSBudWxsIHx8IGN1cnJlbnRTb2x1dGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudFNvbHV0aW9uLnF1ZXN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChzb2x1dGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja1F1ZXN0aW9uXzEubWF0Y2hlcyhzb2x1dGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tRdWVzdGlvbl8xLnNvbHZlKHNvbHV0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzb2x2ZWQgYSBxdWVzdGlvbjpcIiwgY2hlY2tRdWVzdGlvbl8xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCdzIGEgbXVsdGlhbnN3ZXIgcXVlc3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXN0aW9uLmNsYXNzTGlzdC5jb250YWlucyhcIm11bHRpYW5zd2VyXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0cXVlc3Rpb25fMSA9IG5ldyBtdWx0aWFuc3dlcl8xLlR1d2VsTXVsdGlhbnN3ZXIocXVlc3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VhcmNoIGZvciBtYXRjaGluZyBzb2x1dGlvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTb2x1dGlvbiA9PT0gbnVsbCB8fCBjdXJyZW50U29sdXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN1cnJlbnRTb2x1dGlvbi5xdWVzdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoc29sdXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0cXVlc3Rpb25fMS5tYXRjaGVzKHNvbHV0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RxdWVzdGlvbl8xLnNvbHZlKHNvbHV0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzb2x2ZWQgYSBxdWVzdGlvbjpcIiwgc2VsZWN0cXVlc3Rpb25fMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInNvbHZlZCBhbGwga25vd24gcXVlc3Rpb25zXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIFByb2Nlc3MgYSBxdWl6IHJlc3VsdCBvbiB0aGUgXCJUVVdFTCByZXN1bHQgcGFnZVwiXHJcbiAqIGdldHMgdGhlIGNvcnJlY3QgYW5zd2VycywgbWVyZ2VzIHdpdGggY3VycmVudCBhbnN3ZXJzIG9uIHRoZSBzZXJ2ZXIgYW5kIHBvc3RzIHRoZSBtZXJnZVxyXG4gKi9cclxuZnVuY3Rpb24gcHJvY2Vzc1F1aXpSZXN1bHQoKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHF1aXpJRCwgc29sdXRpb25zLCBzb2x2ZWRRdWl6O1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIHF1aXpJRCA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoXCI/XCIsIFwiXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zcGxpdChcIiZcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoZnVuY3Rpb24gKHBhcmFtKSB7IHJldHVybiBwYXJhbS5pbmRleE9mKFwiY21pZFwiKSA+PSAwOyB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShcImNtaWQ9XCIsIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNvbHV0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucXVlXCIpLmZvckVhY2goZnVuY3Rpb24gKHF1ZXN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGl0J3MgYSBtdWx0aXBsZSBjaG9pY2UgcXVlc3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXN0aW9uLmNsYXNzTGlzdC5jb250YWlucyhcIm11bHRpY2hvaWNlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb2x1dGlvbnMucHVzaChuZXcgbXVsdGljaG9pY2VfMS5UdXdlbE11bHRpY2hvaWNlU29sdmVkKHF1ZXN0aW9uKS50b0pTT04oKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBhIHNlbGVjdCBxdWVzdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChxdWVzdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJtdWx0aWFuc3dlclwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29sdXRpb25zLnB1c2gobmV3IG11bHRpYW5zd2VyXzEuVHV3ZWxNdWx0aWFuc3dlclNvbHZlZChxdWVzdGlvbikudG9KU09OKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc29sdmVkUXVpeiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVpejogcXVpeklELFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbnM6IHNvbHV0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcG9zdCB0byBzZXJ2ZXJcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCAoMCwgYXBpXzEuc2V0U29sdXRpb24pKHNvbHZlZFF1aXopXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAvLyBwb3N0IHRvIHNlcnZlclxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKiBjb25uZWN0cyB0dXdlbHNvbHV0aW9uIGZ1bmN0aW9ucyB0byB0aGUgVUkgKi9cclxuZnVuY3Rpb24gc2V0dXAoKSB7XHJcbiAgICB2YXIgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdGhlcm5hdlwiKTtcclxuICAgIHZhciBhY3Rpb25FbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgICBhY3Rpb25FbGVtLmhyZWYgPSBcIiNcIjtcclxuICAgIHZhciBtb2RlID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KFwiL1wiKS5yZXZlcnNlKClbMF07XHJcbiAgICBpZiAobW9kZSA9PSBcImF0dGVtcHQucGhwXCIpIHtcclxuICAgICAgICBhY3Rpb25FbGVtLmlubmVyVGV4dCA9IFwiTG9hZCBmcm9tIHR1d2Vsc29sdXRpb25zXCI7XHJcbiAgICAgICAgYWN0aW9uRWxlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc29sdmVRdWl6KTtcclxuICAgICAgICBuYXYuYXBwZW5kQ2hpbGQoYWN0aW9uRWxlbSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChtb2RlID09IFwicmV2aWV3LnBocFwiKSB7XHJcbiAgICAgICAgYWN0aW9uRWxlbS5pbm5lclRleHQgPSBcIlVwbG9hZCB0byB0dXdlbHNvbHV0aW9uc1wiO1xyXG4gICAgICAgIGFjdGlvbkVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHByb2Nlc3NRdWl6UmVzdWx0KTtcclxuICAgICAgICBuYXYuYXBwZW5kQ2hpbGQoYWN0aW9uRWxlbSk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5zZXR1cCA9IHNldHVwO1xyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY5OCk7XG4iXSwibmFtZXMiOlsiX19hd2FpdGVyIiwidGhpcyIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJfX2dlbmVyYXRvciIsImJvZHkiLCJmIiwieSIsInQiLCJnIiwiXyIsImxhYmVsIiwic2VudCIsInRyeXMiLCJvcHMiLCJ2ZXJiIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJuIiwidiIsIm9wIiwiVHlwZUVycm9yIiwiY2FsbCIsInBvcCIsImxlbmd0aCIsInB1c2giLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJzZXRTb2x1dGlvbiIsImdldFNvbHV0aW9ucyIsImlkIiwiX2EiLCJmZXRjaCIsImpzb24iLCJxdWl6IiwibWV0aG9kIiwiaGVhZGVycyIsIkpTT04iLCJzdHJpbmdpZnkiLCJleHRlbmRTdGF0aWNzIiwiX19leHRlbmRzIiwiZCIsImIiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwicCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiU3RyaW5nIiwiX18iLCJjb25zdHJ1Y3RvciIsImNyZWF0ZSIsIlR1d2VsTXVsdGlhbnN3ZXJTb2x2ZWQiLCJUdXdlbE11bHRpYW5zd2VyIiwicXVlc3Rpb24iLCJfdGhpcyIsImZvcm11bGF0aW9uIiwicXVlcnlTZWxlY3RvciIsImNsb25lTm9kZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwicyIsInJlbW92ZSIsInRleHQiLCJ0ZXh0Q29udGVudCIsImltYWdlIiwic3JjIiwic2xpY2UiLCJhbnN3ZXJzIiwic2VsZWN0Iiwib3B0cyIsIm9wdGlvbiIsIm1hdGNoZXMiLCJ0eXBlIiwiaW1nSGFzaCIsInNvbHZlIiwic29sdXRpb24iLCJzdWJxdWVzdGlvbiIsImluZGV4Iiwic2VsZWN0ZWQiLCJpbm5lclRleHQiLCJfc3VwZXIiLCJzdWJxIiwiaW5uZXJIVE1MIiwic3BsaXQiLCJjb3JyZWN0QW5zd2VycyIsInRvSlNPTiIsIlR1d2VsTXVsdGljaG9pY2VTb2x2ZWQiLCJUdXdlbE11bHRpY2hvaWNlIiwiYW5zd2VyIiwiZWxlbWVudCIsInNvbWUiLCJjbGljayIsInN1YnN0cmluZyIsImluZGV4T2YiLCJ0cmltIiwibWFwIiwiYSIsInNldHVwIiwiYXBpXzEiLCJtdWx0aWFuc3dlcl8xIiwibXVsdGljaG9pY2VfMSIsInNvbHZlUXVpeiIsInF1aXpJRCIsImN1cnJlbnRTb2x1dGlvbiIsIl9iIiwid2luZG93IiwibG9jYXRpb24iLCJzZWFyY2giLCJyZXBsYWNlIiwiZmluZCIsInBhcmFtIiwidW5kZWZpbmVkIiwiY29uc29sZSIsInRpbWVMb2ciLCJsb2ciLCJkb2N1bWVudCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiY2hlY2tRdWVzdGlvbl8xIiwicXVlc3Rpb25zIiwic2VsZWN0cXVlc3Rpb25fMSIsInByb2Nlc3NRdWl6UmVzdWx0Iiwic29sdXRpb25zIiwic29sdmVkUXVpeiIsIm5hdiIsImFjdGlvbkVsZW0iLCJjcmVhdGVFbGVtZW50IiwiaHJlZiIsIm1vZGUiLCJwYXRobmFtZSIsInJldmVyc2UiLCJhZGRFdmVudExpc3RlbmVyIiwiYXBwZW5kQ2hpbGQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyJdLCJzb3VyY2VSb290IjoiIn0=